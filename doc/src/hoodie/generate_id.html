<!DOCTYPE html><html lang="en"><head><title>src/hoodie/generate_id</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../../"><meta name="groc-document-path" content="src/hoodie/generate_id"><meta name="groc-project-path" content="src/hoodie/generate_id.js"><link rel="stylesheet" type="text/css" media="all" href="../../assets/style.css"><script type="text/javascript" src="../../assets/behavior.js"></script><body><div id="meta"><div class="file-path">src/hoodie/generate_id.js</div></div><div id="document"><div class="segment"><div class="comments"><div class="wrapper"><h1 id="hoodiegenerateid">hoodie.generateId</h1></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>helper to generate unique ids.</p></div></div><div class="code"><div class="wrapper"><span class="kd">function</span> <span class="nx">hoodieGenerateId</span> <span class="p">(</span><span class="nx">hoodie</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">chars</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">radix</span><span class="p">;</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>uuids consist of numbers and lowercase letters only.
We stick to lowercase letters to prevent confusion
and to prevent issues with CouchDB, e.g. database
names do wonly allow for lowercase letters.</p></div></div><div class="code"><div class="wrapper">  <span class="nx">chars</span> <span class="o">=</span> <span class="s1">&#39;0123456789abcdefghijklmnopqrstuvwxyz&#39;</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
  <span class="nx">radix</span> <span class="o">=</span> <span class="nx">chars</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>


  <span class="kd">function</span> <span class="nx">generateId</span><span class="p">(</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">id</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>default uuid length to 7</p></div></div><div class="code"><div class="wrapper">    <span class="k">if</span> <span class="p">(</span><span class="nx">length</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">length</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">rand</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="nx">radix</span><span class="p">;</span>
      <span class="kd">var</span> <span class="kr">char</span> <span class="o">=</span> <span class="nx">chars</span><span class="p">[</span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">rand</span><span class="p">)];</span>
      <span class="nx">id</span> <span class="o">+=</span> <span class="nb">String</span><span class="p">(</span><span class="kr">char</span><span class="p">).</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">id</span><span class="p">;</span>
  <span class="p">}</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>Public API</p></div></div><div class="code"><div class="wrapper">  <span class="nx">hoodie</span><span class="p">.</span><span class="nx">generateId</span> <span class="o">=</span> <span class="nx">generateId</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">hoodieGenerateId</span><span class="p">;</span></div></div></div></div></body></html>